#!/bin/bash -l

# expects the first argument to be the absolute path to the GHEX-BENCH root directory
ROOT_PATH=${1%/}

# source common configuration
. ${ROOT_PATH}/utils/jube/slurm/job.in
. ${ROOT_PATH}/utils/jube/slurm/daint/job.in

#SBATCH --constraint=gpu

# modules
module load daint-gpu
module load xpmem

# GPU envs
export CRAY_CUDA_MPS=1
export MPICH_RDMA_ENABLED_CUDA=1
export MPICH_G2G_PIPELINE=30

print_summary

# source jube flag creation
. ${ROOT_PATH}/utils/jube/slurm/flag.in
